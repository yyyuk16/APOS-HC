
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>APOS-HC 調査票 - フォーム3</title>
  <link rel="stylesheet" href="main.css">
  <style>
    /* セクション表示の修正 */
    .section { 
      display: block !important; 
    }
    
    /* iPad用の追加スタイル */
    @media screen and (min-width: 768px) {
      body {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        font-size: 16px;
        line-height: 1.5;
      }
      
      .container {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        padding: 25px;
        margin: 15px 0;
      }
      
      h1 {
        font-size: 1.8em;
        color: #2c3e50;
        text-align: center;
        margin-bottom: 25px;
        border-bottom: 2px solid #3498db;
        padding-bottom: 15px;
      }
      
      h2 {
        font-size: 1.4em;
        color: #34495e;
        margin: 25px 0 15px 0;
        padding: 10px 0;
        border-left: 4px solid #3498db;
        padding-left: 15px;
        background: linear-gradient(90deg, #f8f9fa 0%, transparent 100%);
      }
      
      fieldset {
        border: 2px solid #e0e6ed;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        background: #fafbfc;
        transition: all 0.3s ease;
      }
      
      fieldset:hover {
        border-color: #3498db;
        box-shadow: 0 2px 10px rgba(52, 152, 219, 0.1);
      }
      
      legend {
        font-size: 1.1em;
        font-weight: bold;
        color: #2c3e50;
        padding: 0 10px;
        background: #fff;
        border-radius: 6px;
        border: 2px solid #3498db;
      }
      
      label {
        display: block;
        margin: 10px 0 5px 0;
        font-weight: 600;
        color: #34495e;
        font-size: 1em;
      }
      
      input[type="text"], input[type="tel"], input[type="email"], 
      input[type="number"], select, textarea {
        width: 100%;
        padding: 10px 12px;
        font-size: 1em;
        border: 2px solid #e0e6ed;
        border-radius: 6px;
        background: #fff;
        transition: all 0.3s ease;
        box-sizing: border-box;
        margin-top: 5px;
      }
      
      input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        transform: translateY(-2px);
      }
      
      textarea {
        resize: vertical;
        min-height: 80px;
        font-family: inherit;
      }
      
      .daily-rhythm-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
        background: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      }
      
      .daily-rhythm-table th {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        padding: 12px 10px;
        font-size: 1em;
        font-weight: bold;
        text-align: center;
      }
      
      .daily-rhythm-table td {
        padding: 10px;
        border-bottom: 1px solid #e8f4f8;
        text-align: center;
        vertical-align: middle;
      }
      
      .daily-rhythm-table td:first-child {
        background: #f8f9fa;
        font-weight: 600;
        color: #2c3e50;
        font-size: 0.9em;
        width: 150px;
      }
      
      .daily-rhythm-table input {
        width: 100%;
        padding: 8px 10px;
        font-size: 0.9em;
        border: 2px solid #e0e6ed;
        border-radius: 6px;
        background: #fff;
        transition: all 0.3s ease;
        margin: 0;
      }
      
      .daily-rhythm-table input:focus {
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
      }
      
      .daily-rhythm-table tr:hover {
        background: #f8f9fa;
      }
      
      .note {
        font-size: 0.9em;
        color: #7f8c8d;
        margin-top: 10px;
        padding: 10px;
        background: #ecf0f1;
        border-radius: 6px;
        border-left: 3px solid #95a5a6;
      }
      
      .nav-buttons {
        margin-top: 25px;
        display: flex;
        justify-content: space-between;
        gap: 15px;
      }
      
      .nav-buttons button {
        padding: 12px 25px;
        font-size: 1em;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
      }
      
      .nav-buttons button:first-child {
        background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        color: white;
      }
      
      .nav-buttons button:last-child {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
      }
      
      .nav-buttons button:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      }
      
      .nav-buttons button:active {
        transform: translateY(-1px);
      }
      
      /* プログレスバーのスタイル */
      .progress-container {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: #fff;
        border-top: 1px solid #e0e0e0;
        padding: 20px;
        z-index: 1000;
      }
      
      .progress-wrapper {
        max-width: 800px;
        margin: 0 auto;
      }
      
      .progress-bar {
        width: 100%;
        height: 6px;
        background: #f0f0f0;
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 15px;
      }
      
      .progress-fill {
        height: 100%;
        background: #003366;
        border-radius: 3px;
        transition: width 0.5s ease;
        width: 60%;
      }
      
      .progress-info {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.1em;
        color: #333;
        font-weight: 500;
      }
      
      .progress-page {
        color: #003366;
        font-weight: 600;
      }
      
      .progress-total {
        color: #999;
      }
      
      /* フォームの下部に余白を追加（プログレスバーの分） */
      body {
        padding-bottom: 100px;
      }
    }
    
    /* タブレット用の追加調整 */
    @media screen and (max-width: 1024px) and (min-width: 768px) {
      .daily-rhythm-table td:first-child {
        width: 140px;
      }
      
      .daily-rhythm-table input {
        font-size: 0.85em;
        padding: 6px 8px;
      }
    }
  </style>
  <script src="survey-common.js"></script>
</head>
<body>

<div class="container">
<h1>APOS-HC 調査票</h1>
<form id="surveyForm">

    <h2>Ⅰ　認知の状態</h2>
    <fieldset>
      <legend>認知症高齢者の日常生活自立度</legend>
  
      <table border="1" style="border-collapse:collapse; width:100%; font-size:0.98em; margin-bottom:18px;">
        <thead>
          <tr style="background:#f0f4f8;">
            <th style="width:7%;">ランク</th>
            <th style="width:33%;">判定基準</th>
            <th style="width:60%;">みられる症状・行動の例</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align:center;">0</td>
            <td style="vertical-align:top;">自立</td>
            <td style="vertical-align:top;">－</td>
          </tr>
          <tr>
            <td style="text-align:center;">I</td>
            <td style="vertical-align:top;">
              何らかの認知症を有するが、日常生活には支障があまりなく社会生活はほぼ自立している
            </td>
            <td style="vertical-align:top;">
              ・少しの指示や声かけがあれば１人暮らしは可能である。
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">Ⅱ</td>
            <td style="vertical-align:top;">
              家庭内において上記1の状態がみられる
            </td>
            <td style="vertical-align:top;">
              ・買い物や金銭管理、調理等家事をごくまれに手伝ってもらえばできる
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">IIa</td>
            <td style="vertical-align:top;">
              家庭外で上記2の状態がみられる
            </td>
            <td style="vertical-align:top;">
              ・たびたび道に迷う<br>
              ・買い物や金銭管理でミスが目立つ
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">IIb</td>
            <td style="vertical-align:top;">
              家庭内で上記2の状態がみられる
            </td>
            <td style="vertical-align:top;">
              ・服薬管理ができない<br>
              ・電話応対や訪問者への対応ができない
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">IIIa</td>
            <td style="vertical-align:top;">
              日常生活において上記よりも重度の症状・行動や意思疎通の障害を示すため、介護を必要とする（中度）
            </td>
            <td style="vertical-align:top;">
              ・着替え、食事、排便、排尿が上手にできない<br>
              ・物を盗られたと言う、妄想、失禁、大声、奇声など
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">IIIb</td>
            <td style="vertical-align:top;">
              日常生活において上記よりもさらに重度の症状・行動や意思疎通の障害を示し、常時介護が必要である（重度）
            </td>
            <td style="vertical-align:top;">
              ・徘徊<br>
              ・水分摂取不足、不潔行為<br>
              ・拒否的行動
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">IV</td>
            <td style="vertical-align:top;">
              著しい精神症状や行動異常、あるいは重度の身体疾患を有し、日常生活において全面的な介護を必要とする
            </td>
            <td style="vertical-align:top;">
              ・せん妄、妄想、興奮、自傷<br>
              ・他害や精神症状が持続的にみられる
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">M</td>
            <td style="vertical-align:top;">
              上記のいずれにも該当せず、精神症状や身体疾患により判定不能
            </td>
            <td style="vertical-align:top;">−</td>
          </tr>
        </tbody>
      </table>
            <select name="nutrition_self_management" id="nutrition_self_management" required style="width:98%;">
              <option value="">上記から該当するものを選択してください</option>
              <option value="a">0 自立</option>
              <option value="b">Ⅰ</option>
              <option value="b">Ⅱ</option>
              <option value="c">Ⅱ a</option>
              <option value="d">Ⅱ b</option>
              <option value="e">Ⅲ a</option>
              <option value="f">Ⅲ b</option>
              <option value="g">Ⅳ</option>
              <option value="h">Ｍ</option>
            </select>
            <input type="text" name="nutrition_self_management_other" id="nutrition_self_management_other" style="display:none; margin-top:8px; width:96%;" placeholder="内容を記入してください">
            <script>
              document.getElementById('nutrition_self_management').addEventListener('change', function() {
                var otherInput = document.getElementById('nutrition_self_management_other');
                if (this.value === 'i') {
                  otherInput.style.display = 'block';
                } else {
                  otherInput.style.display = 'none';
                  otherInput.value = '';
                }
              });
       
            </script>
      </tr>
    </table>
 
</div>
<script>
</script>
<div class="section" id="section-lifestyle-habits">
    <h2>Ⅱ　病気のとらえ方：ヘルスリテラシー</h2>
    <fieldset>
      <legend>病気のとらえ方について</legend>

    <td>
      <select name="emotion_level" id="emotion_level" required>
        <option value="">選択してください</option>
        <option value="0">0. 自分の病気や治療を深く理解して自発的に行動している</option>
        <option value="1">1. 自分の病気や治療に疑問が生じた時は医師や看護師に尋ねることができる</option>
        <option value="2">2. 自分の病名や治療に疑問を感じているが、医師や看護師にたずねないまま治療している</option>
        <option value="3">3. 自分の病気や治療について理解が乏しく、医師に言われれば治療や服薬を実施している</option>
        <option value="4">4. 患者が本人に納得なしに居住している／あらため治療意欲が入れていない／不満を表している</option>
      </select>
        <!-- ここはくぎって -->
    </td>
  </tr>
  <tr>
</table>
</fieldset>
</div>
</script>
<div class="section" id="section-lifestyle-habits">
    <h2>Ⅱ　うつ的状態</h2>
    <fieldset>
      <legend>うつ的状態について</legend>

    <table style="width:100%; border-collapse:collapse; margin-bottom:12px;">
      <tr>
        <td colspan="2" style="text-align:center; border:2px solid #3498db; background:linear-gradient(90deg,#e3f2fd 0%,#f8f8f8 100%); padding:18px 0 10px 0;">
          <span style="font-size:1.15em; font-weight:bold; color:#1565c0; letter-spacing:0.05em;">
            「Mの健康度自己評価票」<br>
            <span style="font-size:0.95em; color:#333;">最近2週間の状況</span>
          </span>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="font-size:1em; border:1px solid #b0bec5; background:#f4f8fb; color:#444; padding:12px 18px;">
          <span style="display:inline-block; margin-bottom:4px;">
            <span style="font-weight:bold; color:#1976d2;">評価方法：</span>
            <span style="color:#333;">A評価：問1～5のうち2項目以上うつ状態の評価があるものをB、Cの判定対象とする。</span>
          </span>
          <br>
          <span style="color:#607d8b;">
            一次スクリーニングで高危険性が疑いと判断された人には、<br>
            <span style="font-weight:bold;">二次スクリーニング（専門医）</span>を紹介する。
          </span>
        </td>
      </tr>
    </table>
    <!-- 陰性・陽性回答数表示テーブル -->

    <table border="1" style="border-collapse:collapse; width:100%; font-size:0.98em; margin-bottom:18px;">
      <thead>
        <tr style="background:#f0f4f8;">
          <th style="width:4%;">No</th>
          <th style="width:56%;">質問内容</th>
          <th style="width:40%;">選択</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align:center;">A.1</td>
          <td>毎日の生活に元気が感じられますか</td>
          <td style="text-align:center;">
            <select name="m_health_1" id="m_health_1" required onchange="countAPositive()">
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">A.2</td>
          <td>これまで楽しんでやれていたことが、今も楽しくできていますか</td>
          <td style="text-align:center;">
            <select name="m_health_2" id="m_health_2" required onchange="countAPositive()">
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">A.3</td>
          <td>以前興味をもてたことが、今ではあまりっこ感じられますか</td>
          <td style="text-align:center;">
            <select name="m_health_3" id="m_health_3" required onchange="countAPositive()">
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">A.4</td>
          <td>自分は他のどの人間にも劣らないと思えますか</td>
          <td style="text-align:center;">
            <select name="m_health_4" id="m_health_4" required onchange="countAPositive()">
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">A.5</td>
          <td>わけもなく疲れたような感じがしますか</td>
          <td style="text-align:center;">
            <select name="m_health_5" id="m_health_5" required onchange="countAPositive()">
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">B.6</td>
          <td>「死（自殺）について考えたことがある」について何度も考えることがありますか</td>
          <td style="text-align:center;">
            <select name="m_health_6" required>
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">B.7</td>
          <td>気分がひどく落ち込んだり、日常についてできることに不安がありますか</td>
          <td style="text-align:center;">
            <select name="m_health_7" required>
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="text-align:center;">C.8</td>
          <td>
            最近ひどく困ったことやつらいことに思ったことがありますか
          </td>
          <td style="text-align:center;">
            <select name="m_health_8" id="m_health_8" required onchange="toggleMHealth8Detail()">
              <option value="">選択してください</option>
              <option value="1">はい</option>
              <option value="2">いいえ</option>
            </select>
            <div id="m_health_8_detail_div" style="margin-top:0.5em; display:none;">
              <textarea name="m_health_8_detail" rows="5" style="width:98%;" placeholder="自殺の危険性が高くなる項目で注意を要する「はい」と答えた方、さしつかえなければ、どういうことがあったのかお話し下さい"></textarea>
              <div style="margin-top:0.5em; color:#b00; font-size:0.95em;">
                配偶者や家族の死亡、親戚や近隣の人の自殺、医療機関からの退院 等の場合 ➨ 専門機関へ、記載内容により判断する。
              </div>
            </div>
            
          </td>
        </tr>
      </tbody>
    </table>
    <script>
      function toggleMHealth8Detail() {
        const select = document.getElementById('m_health_8');
        const detailDiv = document.getElementById('m_health_8_detail_div');
        if (select.value === '1') {
          detailDiv.style.display = 'block';
        } else {
          detailDiv.style.display = 'none';
        }
      }

      // A項目の「はい」回答数をカウントして表示
      function countAPositive() {
        // A.1～A.5の全ての項目で「はい」をカウント
        let count = 0;

        const sel1 = document.getElementById('m_health_1');
        if (sel1 && sel1.value == "1") count++;

        const sel2 = document.getElementById('m_health_2');
        if (sel2 && sel2.value == "1") count++;

        const sel3 = document.getElementById('m_health_3');
        if (sel3 && sel3.value == "1") count++;

        const sel4 = document.getElementById('m_health_4');
        if (sel4 && sel4.value == "1") count++;

        const sel5 = document.getElementById('m_health_5');
        if (sel5 && sel5.value == "1") count++;

        document.getElementById('a_positive_count').textContent = count;
      }

      // 初期化時にもカウント
      window.addEventListener('DOMContentLoaded', countAPositive);
    </script>
    </td>
  </tr>
  <tr>
</table>
<table border="1" style="border-collapse:collapse; width:100%; font-size:1.05em; margin-bottom:10px;">
    <tr>
      <td style="width:50%; text-align:left; padding:6px 8px;">
        <span style="font-weight:bold;">A項目の陽性（「はい」）回答数</span>
        <span id="a_positive_count" style="margin-left:10px; font-size:1.1em; color:#1976d2; font-weight:bold;">0</span>
      </td>
    </tr>
  </table>
</fieldset>
</div>

         
    <div class="nav-buttons">
      <button type="button" onclick="location.href='form10.html'">← 戻る</button>
      <button type="button" onclick="location.href='form12.html'">次へ →</button>
    </div>
  </form>
</div>
</fieldset>
<script>
  // 高額費用の利用：理由欄表示
  function toggleExpensiveCostDetail() {
    const val = document.getElementById('expensive_cost_usage').value;
    const reasonDiv = document.getElementById('expensive_cost_reason');
    if (val === '2a' || val === '2b') {
      reasonDiv.style.display = 'block';
    } else {
      reasonDiv.style.display = 'none';
    }
  }
  
  // 公費医療の利用：理由欄表示
  function togglePublicMedicalReason() {
    const val = document.getElementById('public_medical_usage').value;
    const reasonDiv = document.getElementById('public_medical_reason');
    if (val === '2') {
      reasonDiv.style.display = 'block';
    } else {
      reasonDiv.style.display = 'none';
    }
  }
  
  // 公費医療の詳細：病名入力欄表示
  function toggleMedicalDiseaseInput() {
    const val = document.getElementById('public_medical_detail').value;
    const inputDiv = document.getElementById('medical_disease_input');
    if (val === '5' || val === '3') {
      inputDiv.style.display = 'block';
    } else {
      inputDiv.style.display = 'none';
    }
  }
  
  // 公費制度の利用：理由欄表示
  function togglePublicSystemReason() {
    const val = document.getElementById('public_system_usage').value;
    const reasonDiv = document.getElementById('public_system_reason');
    if (val === '2') {
      reasonDiv.style.display = 'block';
    } else {
      reasonDiv.style.display = 'none';
    }
  }
  
  // 公費制度の詳細：詳細入力欄表示
  function toggleSystemDetailInput() {
    const val = document.getElementById('public_system_detail').value;
    const inputDiv = document.getElementById('system_detail_input');
    if (val === '1' || val === '2') {
      inputDiv.style.display = 'block';
    } else {
      inputDiv.style.display = 'none';
    }
  }

  // フォームの自動保存機能
  const form = document.getElementById('surveyForm');
  form.addEventListener('input', () => {
    const data = Object.fromEntries(new FormData(form));
    localStorage.setItem('surveyData_form2', JSON.stringify(data));
  });

  // 保存されたデータの復元
  window.addEventListener('load', () => {
    const saved = localStorage.getItem('surveyData_form2');
    if (saved) {
      const data = JSON.parse(saved);
      Object.keys(data).forEach(key => {
        const el = form.elements[key];
        if (el) {
          el.value = data[key];
        }
      });
    }
  });
</script>

  <!-- プログレスバー -->
  <div class="progress-container">
    <div class="progress-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-info">
        <span class="progress-page" id="currentPage">12</span>
        <span class="progress-total">/ 20</span>
      </div>
    </div>
  </div>

  <script>
    // プログレスバーの更新
    function updateProgress() {
      const progressPercentage = (12 / 20) * 100;
      const progressFill = document.getElementById('progressFill');
      const currentPageElement = document.getElementById('currentPage');
      
      progressFill.style.width = progressPercentage + '%';
      currentPageElement.textContent = '12';
      progressFill.style.background = '#003366';
    }
    
    // 初期プログレス更新
    document.addEventListener('DOMContentLoaded', function() {
      updateProgress();
      
      // フォームの自動保存機能
      const form = document.getElementById('surveyForm');
      const formNumber = 11;
      
      if (form) {
        function collectFormData() {
          const formData = new FormData(form);
          const data = {};
          for (let [key, value] of formData.entries()) {
            if (data[key]) {
              if (Array.isArray(data[key])) {
                data[key].push(value);
              } else {
                data[key] = [data[key], value];
              }
            } else {
              data[key] = value;
            }
          }
          const canvases = form.querySelectorAll('canvas');
          canvases.forEach((canvas, index) => {
            try {
              const canvasId = canvas.id || `canvas_${index}`;
              data[canvasId + '_image'] = canvas.toDataURL('image/png');
            } catch (e) {
              console.error('Canvas保存エラー:', e);
            }
          });
          const allInputs = form.querySelectorAll('input, select, textarea');
          allInputs.forEach(input => {
            if (!input.name) return;
            const isProcessed = data.hasOwnProperty(input.name);
            if (input.type === 'checkbox') {
              if (input.checked) {
                if (!data[input.name]) data[input.name] = [];
                if (Array.isArray(data[input.name])) {
                  if (!data[input.name].includes(input.value)) data[input.name].push(input.value);
                } else {
                  data[input.name] = [data[input.name], input.value];
                }
              }
            } else if (input.type === 'radio') {
              if (input.checked && !isProcessed) data[input.name] = input.value;
            } else {
              if (!isProcessed && input.value) data[input.name] = input.value;
            }
          });
          return data;
        }
        
        form.addEventListener('input', function() {
          const data = collectFormData();
          localStorage.setItem(getFormStorageKey(formNumber), JSON.stringify(data));
          console.log(`Form ${formNumber} データを自動保存しました`);
        });
        
        form.addEventListener('change', function() {
          const data = collectFormData();
          localStorage.setItem(getFormStorageKey(formNumber), JSON.stringify(data));
          console.log(`Form ${formNumber} データを自動保存しました`);
        });
        
        const savedData = localStorage.getItem(getFormStorageKey(formNumber));
        if (savedData) {
          const data = JSON.parse(savedData);
          Object.keys(data).forEach(key => {
            const elements = form.elements[key];
            if (elements) {
              if (elements.length > 1) {
                Array.from(elements).forEach(el => {
                  if (el.type === 'checkbox' || el.type === 'radio') {
                    if (Array.isArray(data[key])) {
                      el.checked = data[key].includes(el.value);
                    } else {
                      el.checked = el.value === data[key];
                    }
                  }
                });
              } else if (elements.length === 1) {
                const el = elements[0];
                if (el.type === 'checkbox' || el.type === 'radio') {
                  if (Array.isArray(data[key])) {
                    el.checked = data[key].includes(el.value);
                  } else {
                    el.checked = el.value === data[key];
                  }
                } else {
                  el.value = data[key] || '';
                }
              } else {
                if (elements.type === 'checkbox' || elements.type === 'radio') {
                  if (Array.isArray(data[key])) {
                    elements.checked = data[key].includes(elements.value);
                  } else {
                    elements.checked = elements.value === data[key];
                  }
                } else {
                  elements.value = data[key] || '';
                }
              }
            }
          });
          console.log(`Form ${formNumber} の保存データを復元しました`);
        }
      }
    });
  </script>

</body>
</html>



